---
---
<h1>Submit Github Issue Using This Form</h1>

<form>
    <div class="form-group">
      <label for="issueTitle">Issue Title</label>
      <input type="text" name='title' class="form-control" id="issueTitle" placeholder="Enter Issue Title">
    </div>
    <div class="form-group">
      <label for="issueBody">Issue Body</label>
      <input type="text" name="body" class="form-control" id="issueBody" placeholder="Body Content">
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>

<script>
    const github_issue_create_endpoint = `https://api.github.com/repos/${OWNER}/${REPO}/issues`;
    document.addEventListener('submit',function(event){
        event.preventDefault();
        let {access_token} = JSON.parse(localStorage.getItem('github-cred'))
        let data = Object.fromEntries( new FormData(event.target) );
        let rv  = createIssue(data);
        console.log(rv,access_token)

    })


    async function createIssue(data,at){
        let res = await axios.post(CREATE_ISSUE, {data}, { headers: {
            'Accept': 'application/vnd.github.v3+json',
            'Authorization': `token ${at}`
        }  } )
        return res.data;
    }
</script>